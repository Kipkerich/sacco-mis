{% extends 'base.html' %}
{% block content %}

<div class="container py-4">
  <h3>Loan Repayment Schedule</h3>
  <p><strong>Member:</strong> {{ loan.member.name }}<br>
     <strong>Loan Amount:</strong> {{ loan.amount }}<br>
     <strong>Plan:</strong> {{ loan.loan_plan.name }}</p>
  <a href="{% url 'loan-schedule-view-pdf' loan.id %}" class="btn btn-success mb-3">Download Schedule (PDF)</a>
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>Month</th>
        <th>Principal</th>
        <th>Interest</th>
        <th>Total Payment</th>
      </tr>
    </thead>
    <tbody>
      {% for row in schedule %}
      <tr>
        <td>{{ row.month }}</td>
        <td>{{ row.principal }}</td>
        <td>{{ row.interest }}</td>
        <td>{{ row.total }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="4" class="text-center">No schedule found.</td></tr>
      {% endfor %}
    </tbody>
  </table>
  <a href="{% url 'loans' %}" class="btn btn-secondary">Back to Loans</a>
</div>
{% endblock %}
